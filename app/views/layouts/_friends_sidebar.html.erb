<div id='friends_sidebar'>
  <div id='friend-suggestions'>
    <h4>Friend Suggestions</h4>
    <% current_user.no_contacts.limit(3).order("RANDOM()").each do |friend| %>
      <%= link_to friend.name, user_path(friend) %>
      <%= button_to 'Add Friend', friend_requests_path, method: :post, params: { recipient_id: friend.id } %>
    <% end %>
  </div>
  <hr>
  <div id='top-friends'>
    <h4>Friends</h4>
    <% current_user.friends.left_joins(:posts).group(:id).order('COUNT(posts.id) DESC').limit(20).each do |friend| %>
      <%= link_to friend.name, user_path(friend) %>
    <% end %>
  </div>
</div>